!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.validate=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var c,i={},t="querySelector"in document&&"addEventListener"in e,m={selector:"[data-validate]",fieldClass:"error",errorClass:"error-message",messageValueMissing:"Please fill out this field.",messageValueMissingSelect:"Please select a value.",messageValueMissingSelectMulti:"Please select at least one value.",messageTypeMismatchEmail:"Please enter an email address.",messageTypeMismatchURL:"Please enter a URL.",messageTooShort:"Please lengthen this text to {minLength} characters or more. You are currently using {length} characters.",messageTooLong:"Please shorten this text to no more than {maxLength} characters. You are currently using {length} characters.",messagePatternMismatch:"Please match the requested format.",messageBadInput:"Please enter a number.",messageStepMismatch:"Please select a valid value.",messageRangeOverflow:"Please select a value that is no more than {max}.",messageRangeUnderflow:"Please select a value that is no less than {min}.",messageGeneric:"The value you entered for this field is invalid.",disableSubmit:!1,onSubmit:function(){},beforeShowError:function(){},afterShowError:function(){},beforeRemoveError:function(){},afterRemoveError:function(){}};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;0<=--o&&t.item(o)!==this;);return-1<o});var d=function(){var o={},s=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(s=arguments[0],e++);for(var r=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s&&"[object Object]"===Object.prototype.toString.call(e[t])?o[t]=d(!0,o[t],e[t]):o[t]=e[t])};e<t;e++){r(arguments[e])}return o};i.hasError=function(e,t){var o=d(c||m,t||{});if(!e.disabled&&"file"!==e.type&&"reset"!==e.type&&"submit"!==e.type&&"button"!==e.type){var s=e.validity;if(!s.valid){if(s.valueMissing)return"select-multiple"===e.type?o.messageValueMissingSelectMulti:"select-one"===e.type?o.messageValueMissingSelect:o.messageValueMissing;if(s.typeMismatch){if("email"===e.type)return o.messageTypeMismatchEmail;if("url"===e.type)return o.messageTypeMismatchURL}return s.tooShort?o.messageTooShort.replace("{minLength}",e.getAttribute("minLength")).replace("{length}",e.value.length):s.tooLong?o.messageTooLong.replace("{minLength}",e.getAttribute("maxLength")).replace("{length}",e.value.length):s.badInput?o.messageBadInput:s.stepMismatch?o.messageStepMismatch:s.rangeOverflow?o.messageRangeOverflow.replace("{max}",e.getAttribute("max")):s.rangeUnderflow?o.messageRangeUnderflow.replace("{min}",e.getAttribute("min")):s.patternMismatch?e.hasAttribute("title")?e.getAttribute("title"):o.messagePatternMismatch:o.messageGeneric}}},i.showError=function(e,t,o){var s=d(c||m,o||{});if(s.beforeShowError(e,t),e.classList.add(s.fieldClass),"radio"===e.type&&e.name){var r=document.getElementsByName(e.name);if(0<r.length){for(var i=0;i<r.length;i++)r[i].form===e.form&&r[i].classList.add(s.fieldClass);e=r[r.length-1]}}var a=e.id||e.name;if(a){var n,l=e.form.querySelector("."+s.errorClass+"#error-for-"+a);if(!l)(l=document.createElement("p")).className=s.errorClass,l.id="error-for-"+a,"radio"!==e.type&&"checkbox"!==e.type||(n=e.form.querySelector('label[for="'+a+'"]')||function(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}(e,"label"))&&n.parentNode.insertBefore(l,n.nextSibling),n||e.parentNode.insertBefore(l,e.nextSibling);e.setAttribute("aria-describedby","error-for-"+a),l.innerHTML=t,l.style.display="",l.style.visibility="",s.afterShowError(e,t)}},i.removeError=function(e,t){var o=d(c||m,t||{});if(o.beforeRemoveError(e),e.removeAttribute("aria-describedby"),e.classList.remove(o.fieldClass),"radio"===e.type&&e.name){var s=document.getElementsByName(e.name);if(0<s.length){for(var r=0;r<s.length;r++)s[r].form===e.form&&s[r].classList.remove(o.fieldClass);e=s[s.length-1]}}var i=e.id||e.name;if(i){var a=e.form.querySelector("."+o.errorClass+"#error-for-"+i);a&&(a.innerHTML="",a.style.display="none",a.style.visibility="hidden",o.afterRemoveError(e))}};var o=function(e){for(var t=document.querySelectorAll(c.selector),o=0;o<t.length;o++)e?t[o].removeAttribute("novalidate"):t[o].setAttribute("novalidate",!0)},s=function(e){if(e.target.form&&e.target.form.matches(c.selector)){var t=i.hasError(e.target);t?i.showError(e.target,t):i.removeError(e.target)}},r=function(e){if(e.target.form&&e.target.form.matches(c.selector)){var t=e.target.getAttribute("type");if("checkbox"===t||"radio"===t){var o=i.hasError(e.target);o?i.showError(e.target,o):i.removeError(e.target)}}},a=function(e){if(e.target.matches(c.selector)){for(var t,o=e.target.elements,s=0;s<o.length;s++){var r=i.hasError(o[s]);r&&(i.showError(o[s],r),t||(t=o[s]))}(t||c.disableSubmit)&&e.preventDefault(),t?t.focus():c.onSubmit(e.target,o)}};return i.destroy=function(){if(c){document.removeEventListener("blur",s,!1),document.removeEventListener("click",r,!0),document.removeEventListener("submit",a,!1);for(var e=document.querySelectorAll(c.errorClass),t=0;t<e.length;t++)i.removeError(e[t]);o(!0),c=null}},i.init=function(e){t&&(i.destroy(),c=d(m,e||{}),o(),document.addEventListener("blur",s,!0),document.addEventListener("click",r,!0),document.addEventListener("submit",a,!1))},i}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(r,e,t,o){var i=[],a=function(){return i.length?i[i.length-1]:null},s=function(){var e,t=!1;for(e=i.length-1;0<=e;e--)i[e].$blocker&&(i[e].$blocker.toggleClass("current",!t).toggleClass("behind",t),t=!0)};r.modal=function(o,e){var s,t;if(this.$body=r("body"),this.options=r.extend({},r.modal.defaults,e),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),this.$blocker=null,this.options.closeExisting)for(;r.modal.isActive();)r.modal.close();if(i.push(this),o.is("a"))if(t=o.attr("href"),this.anchor=o,/^#/.test(t)){if(this.$elm=r(t),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=r("<div>"),this.$body.append(this.$elm),s=function(e,t){t.elm.remove()},this.showSpinner(),o.trigger(r.modal.AJAX_SEND),r.get(t).done(function(e){if(r.modal.isActive()){o.trigger(r.modal.AJAX_SUCCESS);var t=a();t.$elm.empty().append(e).on(r.modal.CLOSE,s),t.hideSpinner(),t.open(),o.trigger(r.modal.AJAX_COMPLETE)}}).fail(function(){o.trigger(r.modal.AJAX_FAIL),a().hideSpinner(),i.pop(),o.trigger(r.modal.AJAX_COMPLETE)});else this.$elm=o,this.anchor=o,this.$body.append(this.$elm),this.open()},r.modal.prototype={constructor:r.modal,open:function(){var e=this;this.block(),this.anchor.blur(),this.options.doFade?setTimeout(function(){e.show()},this.options.fadeDuration*this.options.fadeDelay):this.show(),r(t).off("keydown.modal").on("keydown.modal",function(e){var t=a();27===e.which&&t.options.escapeClose&&t.close()}),this.options.clickClose&&this.$blocker.click(function(e){e.target===this&&r.modal.close()})},close:function(){i.pop(),this.unblock(),this.hide(),r.modal.isActive()||r(t).off("keydown.modal")},block:function(){this.$elm.trigger(r.modal.BEFORE_BLOCK,[this._ctx()]),this.$body.css("overflow","hidden"),this.$blocker=r('<div class="'+this.options.blockerClass+' blocker current"></div>').appendTo(this.$body),s(),this.options.doFade&&this.$blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(r.modal.BLOCK,[this._ctx()])},unblock:function(e){!e&&this.options.doFade?this.$blocker.fadeOut(this.options.fadeDuration,this.unblock.bind(this,!0)):(this.$blocker.children().appendTo(this.$body),this.$blocker.remove(),this.$blocker=null,s(),r.modal.isActive()||this.$body.css("overflow",""))},show:function(){this.$elm.trigger(r.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=r('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass).appendTo(this.$blocker),this.options.doFade?this.$elm.css({opacity:0,display:"inline-block"}).animate({opacity:1},this.options.fadeDuration):this.$elm.css("display","inline-block"),this.$elm.trigger(r.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(r.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove();var e=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,function(){e.$elm.trigger(r.modal.AFTER_CLOSE,[e._ctx()])}):this.$elm.hide(0,function(){e.$elm.trigger(r.modal.AFTER_CLOSE,[e._ctx()])}),this.$elm.trigger(r.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||r('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,$elm:this.$elm,$blocker:this.$blocker,options:this.options}}},r.modal.close=function(e){if(r.modal.isActive()){e&&e.preventDefault();var t=a();return t.close(),t.$elm}},r.modal.isActive=function(){return 0<i.length},r.modal.getCurrent=a,r.modal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",blockerClass:"jquery-modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},r.modal.BEFORE_BLOCK="modal:before-block",r.modal.BLOCK="modal:block",r.modal.BEFORE_OPEN="modal:before-open",r.modal.OPEN="modal:open",r.modal.BEFORE_CLOSE="modal:before-close",r.modal.CLOSE="modal:close",r.modal.AFTER_CLOSE="modal:after-close",r.modal.AJAX_SEND="modal:ajax:send",r.modal.AJAX_SUCCESS="modal:ajax:success",r.modal.AJAX_FAIL="modal:ajax:fail",r.modal.AJAX_COMPLETE="modal:ajax:complete",r.fn.modal=function(e){return 1===this.length&&new r.modal(this,e),this},r(t).on("click.modal",'a[rel~="modal:close"]',r.modal.close),r(t).on("click.modal",'a[rel~="modal:open"]',function(e){e.preventDefault(),r(this).modal()})}),validate.init(),$("a[data-modal]").click(function(e){return $(this).modal({fadeDuration:250,fadeDelay:1.5}),!1});