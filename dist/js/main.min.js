!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.validate=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var c,r={},t="querySelector"in document&&"addEventListener"in e,m={selector:"[data-validate]",fieldClass:"error",errorClass:"error-message",messageValueMissing:"Please fill out this field.",messageValueMissingSelect:"Please select a value.",messageValueMissingSelectMulti:"Please select at least one value.",messageTypeMismatchEmail:"Please enter an email address.",messageTypeMismatchURL:"Please enter a URL.",messageTooShort:"Please lengthen this text to {minLength} characters or more. You are currently using {length} characters.",messageTooLong:"Please shorten this text to no more than {maxLength} characters. You are currently using {length} characters.",messagePatternMismatch:"Please match the requested format.",messageBadInput:"Please enter a number.",messageStepMismatch:"Please select a valid value.",messageRangeOverflow:"Please select a value that is no more than {max}.",messageRangeUnderflow:"Please select a value that is no less than {min}.",messageGeneric:"The value you entered for this field is invalid.",disableSubmit:!1,onSubmit:function(){},beforeShowError:function(){},afterShowError:function(){},beforeRemoveError:function(){},afterRemoveError:function(){}};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;0<=--o&&t.item(o)!==this;);return-1<o});var d=function(){var o={},s=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(s=arguments[0],e++);for(var i=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s&&"[object Object]"===Object.prototype.toString.call(e[t])?o[t]=d(!0,o[t],e[t]):o[t]=e[t])};e<t;e++){i(arguments[e])}return o};r.hasError=function(e,t){var o=d(c||m,t||{});if(!e.disabled&&"file"!==e.type&&"reset"!==e.type&&"submit"!==e.type&&"button"!==e.type){var s=e.validity;if(!s.valid){if(s.valueMissing)return"select-multiple"===e.type?o.messageValueMissingSelectMulti:"select-one"===e.type?o.messageValueMissingSelect:o.messageValueMissing;if(s.typeMismatch){if("email"===e.type)return o.messageTypeMismatchEmail;if("url"===e.type)return o.messageTypeMismatchURL}return s.tooShort?o.messageTooShort.replace("{minLength}",e.getAttribute("minLength")).replace("{length}",e.value.length):s.tooLong?o.messageTooLong.replace("{minLength}",e.getAttribute("maxLength")).replace("{length}",e.value.length):s.badInput?o.messageBadInput:s.stepMismatch?o.messageStepMismatch:s.rangeOverflow?o.messageRangeOverflow.replace("{max}",e.getAttribute("max")):s.rangeUnderflow?o.messageRangeUnderflow.replace("{min}",e.getAttribute("min")):s.patternMismatch?e.hasAttribute("title")?e.getAttribute("title"):o.messagePatternMismatch:o.messageGeneric}}},r.showError=function(e,t,o){var s=d(c||m,o||{});if(s.beforeShowError(e,t),e.classList.add(s.fieldClass),"radio"===e.type&&e.name){var i=document.getElementsByName(e.name);if(0<i.length){for(var r=0;r<i.length;r++)i[r].form===e.form&&i[r].classList.add(s.fieldClass);e=i[i.length-1]}}var a=e.id||e.name;if(a){var l,n=e.form.querySelector("."+s.errorClass+"#error-for-"+a);if(!n)(n=document.createElement("p")).className=s.errorClass,n.id="error-for-"+a,"radio"!==e.type&&"checkbox"!==e.type||(l=e.form.querySelector('label[for="'+a+'"]')||function(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}(e,"label"))&&l.parentNode.insertBefore(n,l.nextSibling),l||e.parentNode.insertBefore(n,e.nextSibling);e.setAttribute("aria-describedby","error-for-"+a),n.innerHTML=t,n.style.display="",n.style.visibility="",s.afterShowError(e,t)}},r.removeError=function(e,t){var o=d(c||m,t||{});if(o.beforeRemoveError(e),e.removeAttribute("aria-describedby"),e.classList.remove(o.fieldClass),"radio"===e.type&&e.name){var s=document.getElementsByName(e.name);if(0<s.length){for(var i=0;i<s.length;i++)s[i].form===e.form&&s[i].classList.remove(o.fieldClass);e=s[s.length-1]}}var r=e.id||e.name;if(r){var a=e.form.querySelector("."+o.errorClass+"#error-for-"+r);a&&(a.innerHTML="",a.style.display="none",a.style.visibility="hidden",o.afterRemoveError(e))}};var o=function(e){for(var t=document.querySelectorAll(c.selector),o=0;o<t.length;o++)e?t[o].removeAttribute("novalidate"):t[o].setAttribute("novalidate",!0)},s=function(e){if(e.target.form&&e.target.form.matches(c.selector)){var t=r.hasError(e.target);t?r.showError(e.target,t):r.removeError(e.target)}},i=function(e){if(e.target.form&&e.target.form.matches(c.selector)){var t=e.target.getAttribute("type");if("checkbox"===t||"radio"===t){var o=r.hasError(e.target);o?r.showError(e.target,o):r.removeError(e.target)}}},a=function(e){if(e.target.matches(c.selector)){for(var t,o=e.target.elements,s=0;s<o.length;s++){var i=r.hasError(o[s]);i&&(r.showError(o[s],i),t||(t=o[s]))}(t||c.disableSubmit)&&e.preventDefault(),t?t.focus():c.onSubmit(e.target,o)}};return r.destroy=function(){if(c){document.removeEventListener("blur",s,!1),document.removeEventListener("click",i,!0),document.removeEventListener("submit",a,!1);for(var e=document.querySelectorAll(c.errorClass),t=0;t<e.length;t++)r.removeError(e[t]);o(!0),c=null}},r.init=function(e){t&&(r.destroy(),c=d(m,e||{}),o(),document.addEventListener("blur",s,!0),document.addEventListener("click",i,!0),document.addEventListener("submit",a,!1))},r}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(i,e,t,o){var r=[],a=function(){return r.length?r[r.length-1]:null},s=function(){var e,t=!1;for(e=r.length-1;0<=e;e--)r[e].$blocker&&(r[e].$blocker.toggleClass("current",!t).toggleClass("behind",t),t=!0)};i.modal=function(o,e){var s,t;if(this.$body=i("body"),this.options=i.extend({},i.modal.defaults,e),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),this.$blocker=null,this.options.closeExisting)for(;i.modal.isActive();)i.modal.close();if(r.push(this),o.is("a"))if(t=o.attr("href"),this.anchor=o,/^#/.test(t)){if(this.$elm=i(t),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=i("<div>"),this.$body.append(this.$elm),s=function(e,t){t.elm.remove()},this.showSpinner(),o.trigger(i.modal.AJAX_SEND),i.get(t).done(function(e){if(i.modal.isActive()){o.trigger(i.modal.AJAX_SUCCESS);var t=a();t.$elm.empty().append(e).on(i.modal.CLOSE,s),t.hideSpinner(),t.open(),o.trigger(i.modal.AJAX_COMPLETE)}}).fail(function(){o.trigger(i.modal.AJAX_FAIL),a().hideSpinner(),r.pop(),o.trigger(i.modal.AJAX_COMPLETE)});else this.$elm=o,this.anchor=o,this.$body.append(this.$elm),this.open()},i.modal.prototype={constructor:i.modal,open:function(){var e=this;this.block(),this.anchor.blur(),this.options.doFade?setTimeout(function(){e.show()},this.options.fadeDuration*this.options.fadeDelay):this.show(),i(t).off("keydown.modal").on("keydown.modal",function(e){var t=a();27===e.which&&t.options.escapeClose&&t.close()}),this.options.clickClose&&this.$blocker.click(function(e){e.target===this&&i.modal.close()})},close:function(){r.pop(),this.unblock(),this.hide(),i.modal.isActive()||i(t).off("keydown.modal")},block:function(){this.$elm.trigger(i.modal.BEFORE_BLOCK,[this._ctx()]),this.$body.addClass("modal-active"),this.$blocker=i('<div class="'+this.options.blockerClass+' blocker current"></div>').appendTo(this.$body),s(),this.options.doFade&&this.$blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(i.modal.BLOCK,[this._ctx()])},unblock:function(e){!e&&this.options.doFade?this.$blocker.fadeOut(this.options.fadeDuration,this.unblock.bind(this,!0)):(this.$blocker.children().appendTo(this.$body),this.$blocker.remove(),this.$blocker=null,s(),i.modal.isActive()||this.$body.removeClass("modal-active"))},show:function(){this.$elm.trigger(i.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=i('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass).appendTo(this.$blocker),this.options.doFade?this.$elm.css({opacity:0,display:"inline-block"}).animate({opacity:1},this.options.fadeDuration):this.$elm.css("display","inline-block"),this.$elm.trigger(i.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(i.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove();var e=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,function(){e.$elm.trigger(i.modal.AFTER_CLOSE,[e._ctx()])}):this.$elm.hide(0,function(){e.$elm.trigger(i.modal.AFTER_CLOSE,[e._ctx()])}),this.$elm.trigger(i.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||i('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,$elm:this.$elm,$blocker:this.$blocker,options:this.options}}},i.modal.close=function(e){if(i.modal.isActive()){e&&e.preventDefault();var t=a();return t.close(),t.$elm}},i.modal.isActive=function(){return 0<r.length},i.modal.getCurrent=a,i.modal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",blockerClass:"jquery-modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},i.modal.BEFORE_BLOCK="modal:before-block",i.modal.BLOCK="modal:block",i.modal.BEFORE_OPEN="modal:before-open",i.modal.OPEN="modal:open",i.modal.BEFORE_CLOSE="modal:before-close",i.modal.CLOSE="modal:close",i.modal.AFTER_CLOSE="modal:after-close",i.modal.AJAX_SEND="modal:ajax:send",i.modal.AJAX_SUCCESS="modal:ajax:success",i.modal.AJAX_FAIL="modal:ajax:fail",i.modal.AJAX_COMPLETE="modal:ajax:complete",i.fn.modal=function(e){return 1===this.length&&new i.modal(this,e),this},i(t).on("click.modal",'a[rel~="modal:close"]',i.modal.close),i(t).on("click.modal",'a[rel~="modal:open"]',function(e){e.preventDefault(),i(this).modal()})}),validate.init(),$("a[data-modal]").click(function(e){return $(this).modal({fadeDuration:200,fadeDelay:.5}),!1});