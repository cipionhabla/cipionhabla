!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.validate=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t,o={},s="querySelector"in document&&"addEventListener"in e,r={selector:"[data-validate]",fieldClass:"error",errorClass:"error-message",messageValueMissing:"Please fill out this field.",messageValueMissingSelect:"Please select a value.",messageValueMissingSelectMulti:"Please select at least one value.",messageTypeMismatchEmail:"Please enter an email address.",messageTypeMismatchURL:"Please enter a URL.",messageTooShort:"Please lengthen this text to {minLength} characters or more. You are currently using {length} characters.",messageTooLong:"Please shorten this text to no more than {maxLength} characters. You are currently using {length} characters.",messagePatternMismatch:"Please match the requested format.",messageBadInput:"Please enter a number.",messageStepMismatch:"Please select a valid value.",messageRangeOverflow:"Please select a value that is no more than {max}.",messageRangeUnderflow:"Please select a value that is no less than {min}.",messageGeneric:"The value you entered for this field is invalid.",disableSubmit:!1,onSubmit:function(){},beforeShowError:function(){},afterShowError:function(){},beforeRemoveError:function(){},afterRemoveError:function(){}};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t.item(o)!==this;);return o>-1});var i=function(){var e={},t=!1,o=0,s=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],o++);for(var r=function(o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t&&"[object Object]"===Object.prototype.toString.call(o[s])?e[s]=i(!0,e[s],o[s]):e[s]=o[s])};o<s;o++){r(arguments[o])}return e};o.hasError=function(e,o){var s=i(t||r,o||{});if(!e.disabled&&"file"!==e.type&&"reset"!==e.type&&"submit"!==e.type&&"button"!==e.type){var a=e.validity;if(!a.valid){if(a.valueMissing)return"select-multiple"===e.type?s.messageValueMissingSelectMulti:"select-one"===e.type?s.messageValueMissingSelect:s.messageValueMissing;if(a.typeMismatch){if("email"===e.type)return s.messageTypeMismatchEmail;if("url"===e.type)return s.messageTypeMismatchURL}return a.tooShort?s.messageTooShort.replace("{minLength}",e.getAttribute("minLength")).replace("{length}",e.value.length):a.tooLong?s.messageTooLong.replace("{minLength}",e.getAttribute("maxLength")).replace("{length}",e.value.length):a.badInput?s.messageBadInput:a.stepMismatch?s.messageStepMismatch:a.rangeOverflow?s.messageRangeOverflow.replace("{max}",e.getAttribute("max")):a.rangeUnderflow?s.messageRangeUnderflow.replace("{min}",e.getAttribute("min")):a.patternMismatch?e.hasAttribute("title")?e.getAttribute("title"):s.messagePatternMismatch:s.messageGeneric}}},o.showError=function(e,o,s){var a=i(t||r,s||{});if(a.beforeShowError(e,o),e.classList.add(a.fieldClass),"radio"===e.type&&e.name){var n=document.getElementsByName(e.name);if(n.length>0){for(var l=0;l<n.length;l++)n[l].form===e.form&&n[l].classList.add(a.fieldClass);e=n[n.length-1]}}var c=e.id||e.name;if(c){var m,d=e.form.querySelector("."+a.errorClass+"#error-for-"+c);if(!d)(d=document.createElement("p")).className=a.errorClass,d.id="error-for-"+c,"radio"!==e.type&&"checkbox"!==e.type||(m=e.form.querySelector('label[for="'+c+'"]')||function(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}(e,"label"))&&m.parentNode.insertBefore(d,m.nextSibling),m||e.parentNode.insertBefore(d,e.nextSibling);e.setAttribute("aria-describedby","error-for-"+c),d.innerHTML=o,d.style.display="",d.style.visibility="",a.afterShowError(e,o)}},o.removeError=function(e,o){var s=i(t||r,o||{});if(s.beforeRemoveError(e),e.removeAttribute("aria-describedby"),e.classList.remove(s.fieldClass),"radio"===e.type&&e.name){var a=document.getElementsByName(e.name);if(a.length>0){for(var n=0;n<a.length;n++)a[n].form===e.form&&a[n].classList.remove(s.fieldClass);e=a[a.length-1]}}var l=e.id||e.name;if(l){var c=e.form.querySelector("."+s.errorClass+"#error-for-"+l);c&&(c.innerHTML="",c.style.display="none",c.style.visibility="hidden",s.afterRemoveError(e))}};var a=function(e){for(var o=document.querySelectorAll(t.selector),s=0;s<o.length;s++)e?o[s].removeAttribute("novalidate"):o[s].setAttribute("novalidate",!0)},n=function(e){if(e.target.form&&e.target.form.matches(t.selector)){var s=o.hasError(e.target);s?o.showError(e.target,s):o.removeError(e.target)}},l=function(e){if(e.target.form&&e.target.form.matches(t.selector)){var s=e.target.getAttribute("type");if("checkbox"===s||"radio"===s){var r=o.hasError(e.target);r?o.showError(e.target,r):o.removeError(e.target)}}},c=function(e){if(e.target.matches(t.selector)){for(var s,r=e.target.elements,i=0;i<r.length;i++){var a=o.hasError(r[i]);a&&(o.showError(r[i],a),s||(s=r[i]))}(s||t.disableSubmit)&&e.preventDefault(),s?s.focus():t.onSubmit(e.target,r)}};return o.destroy=function(){if(t){document.removeEventListener("blur",n,!1),document.removeEventListener("click",l,!0),document.removeEventListener("submit",c,!1);for(var e=document.querySelectorAll(t.errorClass),s=0;s<e.length;s++)o.removeError(e[s]);a(!0),t=null}},o.init=function(e){s&&(o.destroy(),t=i(r,e||{}),a(),document.addEventListener("blur",n,!0),document.addEventListener("click",l,!0),document.addEventListener("submit",c,!1))},o}),function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,o,s){var r=[],i=function(){return r.length?r[r.length-1]:null},a=function(){var e,t=!1;for(e=r.length-1;e>=0;e--)r[e].$blocker&&(r[e].$blocker.toggleClass("current",!t).toggleClass("behind",t),t=!0)};e.modal=function(t,o){var s,a;if(this.$body=e("body"),this.options=e.extend({},e.modal.defaults,o),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),this.$blocker=null,this.options.closeExisting)for(;e.modal.isActive();)e.modal.close();if(r.push(this),t.is("a"))if(a=t.attr("href"),this.anchor=t,/^#/.test(a)){if(this.$elm=e(a),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=e("<div>"),this.$body.append(this.$elm),s=function(e,t){t.elm.remove()},this.showSpinner(),t.trigger(e.modal.AJAX_SEND),e.get(a).done(function(o){if(e.modal.isActive()){t.trigger(e.modal.AJAX_SUCCESS);var r=i();r.$elm.empty().append(o).on(e.modal.CLOSE,s),r.hideSpinner(),r.open(),t.trigger(e.modal.AJAX_COMPLETE)}}).fail(function(){t.trigger(e.modal.AJAX_FAIL),i().hideSpinner(),r.pop(),t.trigger(e.modal.AJAX_COMPLETE)});else this.$elm=t,this.anchor=t,this.$body.append(this.$elm),this.open()},e.modal.prototype={constructor:e.modal,open:function(){var t=this;this.block(),this.anchor.blur(),this.options.doFade?setTimeout(function(){t.show()},this.options.fadeDuration*this.options.fadeDelay):this.show(),e(o).off("keydown.modal").on("keydown.modal",function(e){var t=i();27===e.which&&t.options.escapeClose&&t.close()}),this.options.clickClose&&this.$blocker.click(function(t){t.target===this&&e.modal.close()})},close:function(){r.pop(),this.unblock(),this.hide(),e.modal.isActive()||e(o).off("keydown.modal")},block:function(){this.$elm.trigger(e.modal.BEFORE_BLOCK,[this._ctx()]),this.$body.css("overflow","hidden"),this.$blocker=e('<div class="'+this.options.blockerClass+' blocker current"></div>').appendTo(this.$body),a(),this.options.doFade&&this.$blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(e.modal.BLOCK,[this._ctx()])},unblock:function(t){!t&&this.options.doFade?this.$blocker.fadeOut(this.options.fadeDuration,this.unblock.bind(this,!0)):(this.$blocker.children().appendTo(this.$body),this.$blocker.remove(),this.$blocker=null,a(),e.modal.isActive()||this.$body.css("overflow",""))},show:function(){this.$elm.trigger(e.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=e('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass).appendTo(this.$blocker),this.options.doFade?this.$elm.css({opacity:0,display:"inline-block"}).animate({opacity:1},this.options.fadeDuration):this.$elm.css("display","inline-block"),this.$elm.trigger(e.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(e.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove();var t=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,function(){t.$elm.trigger(e.modal.AFTER_CLOSE,[t._ctx()])}):this.$elm.hide(0,function(){t.$elm.trigger(e.modal.AFTER_CLOSE,[t._ctx()])}),this.$elm.trigger(e.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||e('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,$elm:this.$elm,$blocker:this.$blocker,options:this.options}}},e.modal.close=function(t){if(e.modal.isActive()){t&&t.preventDefault();var o=i();return o.close(),o.$elm}},e.modal.isActive=function(){return r.length>0},e.modal.getCurrent=i,e.modal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",blockerClass:"jquery-modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},e.modal.BEFORE_BLOCK="modal:before-block",e.modal.BLOCK="modal:block",e.modal.BEFORE_OPEN="modal:before-open",e.modal.OPEN="modal:open",e.modal.BEFORE_CLOSE="modal:before-close",e.modal.CLOSE="modal:close",e.modal.AFTER_CLOSE="modal:after-close",e.modal.AJAX_SEND="modal:ajax:send",e.modal.AJAX_SUCCESS="modal:ajax:success",e.modal.AJAX_FAIL="modal:ajax:fail",e.modal.AJAX_COMPLETE="modal:ajax:complete",e.fn.modal=function(t){return 1===this.length&&new e.modal(this,t),this},e(o).on("click.modal",'a[rel~="modal:close"]',e.modal.close),e(o).on("click.modal",'a[rel~="modal:open"]',function(t){t.preventDefault(),e(this).modal()})}),validate.init(),$("a[data-modal]").click(function(e){return $(this).modal({fadeDuration:250,fadeDelay:1.5}),!1});